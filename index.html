<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>æ•…äº‹è®°å½•</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<style>
/* ===== åŸæ ·ä¿ç•™ä½ çš„ CSSï¼ˆæœªåšä»»ä½•ä¿®æ”¹ï¼‰ ===== */
*{margin:0;padding:0;box-sizing:border-box;font-family:'Comic Sans MS','Arial Rounded MT Bold',Arial,sans-serif}
body{background:#f0f9ff;color:#333;padding:20px;max-width:1200px;margin:0 auto}
.hidden{display:none!important}
.container{background:#fff;border-radius:20px;box-shadow:0 5px 15px rgba(0,0,0,.1);padding:30px;margin-bottom:30px}
h1{text-align:center;color:#4a6fa5;margin-bottom:20px;font-size:2.5rem}
h2{color:#6b9ac4;margin-bottom:15px;border-bottom:2px dashed #cae1f1;padding-bottom:8px}
.story-image{max-width:100%;max-height:500px;border-radius:15px;box-shadow:0 5px 15px rgba(0,0,0,.1)}
.btn{background:#6b9ac4;color:#fff;border:none;padding:12px 24px;border-radius:50px;font-size:16px;cursor:pointer;font-weight:bold}
.btn-primary{background:linear-gradient(90deg,#ff9a8b,#ff6a88,#ff99ac)}
.all-images{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:15px;margin-top:20px}
.story-thumbnail{width:100%;height:120px;object-fit:cover;border-radius:10px}
</style>
</head>

<body>

<h1>ğŸ“š æ•…äº‹è®°å½•</h1>

<div class="container">
  <h2>å›¾ç‰‡æµ‹è¯•</h2>
  <button class="btn" onclick="test()">æµ‹è¯•å›¾ç‰‡åŠ è½½</button>
  <p id="log"></p>
</div>

<div class="container">
  <img id="mainImg" class="story-image" />
</div>

<div class="container all-images" id="thumbs"></div>

<script>
/* ======================================================
   âœ… GitHub Pages Project Page ç»ˆæè·¯å¾„ä¿®å¤ï¼ˆå…³é”®ï¼‰
   ====================================================== */

const repoName = location.pathname.split('/')[1]; 
// â†’ story_rabbit

const AppConfig = {
  imageFolder: `/${repoName}/images`,  // âœ… æ ¸å¿ƒä¿®å¤
  imageFormat: 'png',
  startIndex: 1,
  totalImages: 5
};

/* ======================================================
   æµ‹è¯• & æ¼”ç¤ºé€»è¾‘ï¼ˆä¸å½±å“ä½ åŸåŠŸèƒ½ï¼‰
   ====================================================== */

function test() {
  const log = document.getElementById('log');
  const img = new Image();
  const url = `${AppConfig.imageFolder}/1.${AppConfig.imageFormat}`;
  img.onload = () => log.innerHTML = `âœ… æˆåŠŸåŠ è½½ï¼š${url}`;
  img.onerror = () => log.innerHTML = `âŒ åŠ è½½å¤±è´¥ï¼š${url}`;
  img.src = url + '?t=' + Date.now();
}

function loadMain() {
  document.getElementById('mainImg').src =
    `${AppConfig.imageFolder}/1.${AppConfig.imageFormat}`;
}

function loadThumbs() {
  const box = document.getElementById('thumbs');
  for (let i = 1; i <= AppConfig.totalImages; i++) {
    const img = document.createElement('img');
    img.className = 'story-thumbnail';
    img.src = `${AppConfig.imageFolder}/${i}.${AppConfig.imageFormat}`;
    box.appendChild(img);
  }
}

loadMain();
loadThumbs();
</script>

</body>
</html>
