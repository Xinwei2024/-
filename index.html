<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ•…äº‹è®°å½•ï¼ˆGitHub Pages ä¿®å¤ç‰ˆï¼‰</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f0f9ff;
  padding: 20px;
  max-width: 1000px;
  margin: auto;
}
h1 {
  text-align: center;
  color: #4a6fa5;
}
button {
  padding: 10px 20px;
  font-size: 16px;
  margin: 10px 0;
  cursor: pointer;
}
img {
  max-width: 100%;
  border-radius: 12px;
  margin: 10px 0;
}
.thumb {
  width: 180px;
  height: 120px;
  object-fit: cover;
}
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 15px;
}
.log {
  background: #fff;
  padding: 10px;
  border-radius: 8px;
  margin-top: 10px;
  font-size: 14px;
}
</style>
</head>

<body>

<h1>ğŸ“š æ•…äº‹è®°å½•ï¼ˆGitHub Pages ç¨³å®šç‰ˆï¼‰</h1>

<button onclick="testImages()">æµ‹è¯•å›¾ç‰‡åŠ è½½</button>

<div class="log" id="log">ç­‰å¾…æµ‹è¯•â€¦</div>

<h2>å½“å‰å›¾ç‰‡</h2>
<img id="mainImage">

<h2>å…¨éƒ¨å›¾ç‰‡</h2>
<div class="grid" id="thumbs"></div>

<script>
/* ======================================================
   âœ… GitHub Pages Project Page è·¯å¾„ç»ˆæä¿®å¤
   ====================================================== */

// è‡ªåŠ¨è·å–ä»“åº“åï¼šstory_rabbit
const repoName = location.pathname.split('/')[1];

// å”¯ä¸€ã€å”¯ä¸€ã€å”¯ä¸€çš„é…ç½®æº
const AppConfig = {
  imageFolder: `/${repoName}/images`,
  imageFormat: 'png',
  totalImages: 5
};

console.log('âœ… å½“å‰ä»“åº“å:', repoName);
console.log('âœ… å›¾ç‰‡åŸºè·¯å¾„:', AppConfig.imageFolder);

/* ======================================================
   åŠŸèƒ½å‡½æ•°
   ====================================================== */

function imageUrl(i) {
  return `${AppConfig.imageFolder}/${i}.${AppConfig.imageFormat}`;
}

function testImages() {
  const log = document.getElementById('log');
  log.innerHTML = '';

  let ok = 0;

  for (let i = 1; i <= AppConfig.totalImages; i++) {
    const img = new Image();
    const url = imageUrl(i);

    img.onload = () => {
      ok++;
      log.innerHTML += `âœ… åŠ è½½æˆåŠŸï¼š${url}<br>`;
      if (ok === AppConfig.totalImages) {
        log.innerHTML += `<strong>ğŸ‰ æ‰€æœ‰å›¾ç‰‡åŠ è½½æˆåŠŸ</strong>`;
      }
    };

    img.onerror = () => {
      log.innerHTML += `âŒ åŠ è½½å¤±è´¥ï¼š${url}<br>`;
    };

    img.src = url + '?t=' + Date.now();
  }
}

function loadMainImage() {
  const main = document.getElementById('mainImage');
  main.src = imageUrl(1);
}

function loadThumbs() {
  const box = document.getElementById('thumbs');
  box.innerHTML = '';

  for (let i = 1; i <= AppConfig.totalImages; i++) {
    const img = document.createElement('img');
    img.className = 'thumb';
    img.src = imageUrl(i);
    box.appendChild(img);
  }
}

/* ======================================================
   åˆå§‹åŒ–
   ====================================================== */

loadMainImage();
loadThumbs();
</script>

</body>
</html>
